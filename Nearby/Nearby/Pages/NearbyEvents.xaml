<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Nearby.Pages.NearbyEvents"
             xmlns:ffimageloading="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"  
             xmlns:helpers="clr-namespace:Nearby.Helpers"
             Title="Events Nearby">


   <ListView
      x:Name="lstEvents"
      ItemsSource="{Binding EventsNearby}"
      HasUnevenRows="True"
      BackgroundColor="White"
      CachingStrategy="RecycleElement"
      IsPullToRefreshEnabled="True"
      RefreshCommand="{Binding RefreshCommand}"
      IsRefreshing="{Binding IsBusy, Mode=OneWay}">
      <ListView.SeparatorColor>
        <OnPlatform x:TypeArguments="Color" iOS="{StaticResource ListSeparator}"/>
      </ListView.SeparatorColor>
      <ListView.ItemTemplate>
        <DataTemplate>
          <ViewCell>
            <ViewCell.View>
              <Grid Padding="5, 0, 5, 10">
                 <Grid.HeightRequest>
                    <helpers:OnCustomPlatform
                        x:TypeArguments="x:Double"
                        iOS="180"
                        Android="200" 
                        WinPhone="150"
                        Windows="160"/>
                </Grid.HeightRequest>
                <AbsoluteLayout>
                  <Image
                     HorizontalOptions="FillAndExpand"
                     VerticalOptions="FillAndExpand"
                     Aspect="AspectFill"
                     AbsoluteLayout.LayoutFlags="All" 
                     AbsoluteLayout.LayoutBounds="0, 0, 1.0, 1.0"
                     Source="https://raw.githubusercontent.com/Microsoft/BikeSharing360_MobileApps/master/src/CommonResources/suggestion_bronx_river.png" ></Image>
                </AbsoluteLayout>
                
                <Grid
                    Padding="15, 10"
                    VerticalOptions="EndAndExpand">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid
                        Grid.Row="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Label TextColor="White"
                            Grid.Row="0"
                            Text="{Binding title}"/>
                        <Label TextColor="White"
                            Grid.Row="1"
                            Text="{Binding city_name}"
                            LineBreakMode="TailTruncation"/>
                    </Grid>
                  </Grid>
              </Grid>
            </ViewCell.View>
          </ViewCell>
          
        </DataTemplate>
      </ListView.ItemTemplate>
    </ListView>
</ContentPage>